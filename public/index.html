<script type="text/babel">
  const { useState } = React;

  const players = [
    { tier: 'S', name: 'Bastien', score: 2400 },
    { tier: 'A', name: 'Lorex', score: 2300 },
    { tier: 'A', name: 'Shido', score: 2250 },
    { tier: 'A', name: 'Raxy', score: 2200 },
    { tier: 'B', name: 'Skusku', score: 2150 },
    { tier: 'B', name: 'Prissme', score: 2121 },
    { tier: 'B', name: 'Mxgic', score: 2050 },
    { tier: 'B', name: 'Saladeee', score: 2000 },
    { tier: 'B', name: 'Fernmtzzz', score: 1950 },
    { tier: 'B', name: 'Levy', score: 1900 },
    { tier: 'C', name: 'Kazuhaa', score: 1850 },
    { tier: 'C', name: 'Killer', score: 1825 },
    { tier: 'C', name: 'Achraff', score: 1800 },
    { tier: 'C', name: 'Giuk', score: 1775 },
    { tier: 'C', name: 'Naboo', score: 1750 },
    { tier: 'C', name: 'Dodo', score: 1725 },
    { tier: 'C', name: 'Eren', score: 1700 },
    { tier: 'C', name: 'Hutao', score: 1675 },
    { tier: 'C', name: 'Fortissaxx', score: 1650 },
    { tier: 'C', name: 'Rujo', score: 1645 },
    { tier: 'D', name: 'Mamba', score: 1600 },
    { tier: 'D', name: 'Wished', score: 1540 },
    { tier: 'D', name: 'Kawa', score: 1550 },
    { tier: 'D', name: 'Smooth', score: 1525 },
    { tier: 'D', name: 'Marlon', score: 1500 },
    { tier: 'D', name: 'MomiJn', score: 1475 },
    { tier: 'D', name: 'Sapeur', score: 1450 },
    { tier: 'D', name: 'Loyy', score: 1425 },
    { tier: 'D', name: 'Goshii', score: 1400 },
    { tier: 'D', name: 'Maxi', score: 1375 },
    { tier: 'D', name: 'Andre', score: 1350 },
    { tier: 'D', name: 'Astraaa', score: 1325 },
    { tier: 'D', name: 'Nyxia', score: 1300 },
    { tier: 'D', name: 'Rash', score: 1275 },
    { tier: 'D', name: 'Heyko', score: 1250 },
    { tier: 'E', name: 'Itachi', score: 1261 },
    { tier: 'E', name: 'Tht', score: 1200 },
    { tier: 'E', name: 'Drxp', score: 1175 },
    { tier: 'E', name: 'Fire', score: 1150 },
    { tier: 'E', name: 'Scylla', score: 1125 },
    { tier: 'E', name: 'Ryokk', score: 1100 },
    { tier: 'E', name: 'Melon', score: 1075 },
    { tier: 'E', name: 'Zedraxx', score: 1050 },
    { tier: 'E', name: 'Aben', score: 1025 },
    { tier: 'E', name: 'Skor', score: 1000 },
    { tier: 'E', name: 'Walid', score: 1000 },
    { tier: 'E', name: 'Techwood', score: 1000 },
    { tier: 'E', name: 'Fares', score: 1000 },
    { tier: 'E', name: 'Kyzonn', score: 1000 },
    { tier: 'E', name: 'LoniXx', score: 1000 },
    { tier: 'D', name: 'DayloXx', score: 1279 },
    { tier: 'E', name: 'Serpent', score: 1279 },
  ];

  const tierStyles = {
    S: 'bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-200',
    A: 'bg-gradient-to-r from-blue-400 via-purple-300 to-indigo-200',
    B: 'bg-gradient-to-r from-orange-600 via-orange-400 to-orange-200',
    C: 'bg-gradient-to-r from-pink-600 via-red-500 to-red-400',
    D: 'bg-gradient-to-r from-blue-400 via-purple-400 to-purple-300',
    E: 'bg-gradient-to-r from-green-700 via-green-500 to-green-300',
  };

  function DemonList() {
    const [query, setQuery] = useState('');
    const [selectedTier, setSelectedTier] = useState('ALL');
    const [sortBy, setSortBy] = useState('score');

    const tiers = ['ALL','S','A','B','C','D','E'];

    const filtered = () => {
      let list = [...players];
      if (selectedTier !== 'ALL') list = list.filter(p => p.tier === selectedTier);
      if (query.trim() !== '') list = list.filter(p => p.name.toLowerCase().includes(query.toLowerCase()));
      if (sortBy === 'rank') list.sort((a,b)=>b.score-a.score); // rank recalculé selon score
      if (sortBy === 'score') list.sort((a,b)=>b.score-a.score);
      if (sortBy === 'name') list.sort((a,b)=>a.name.localeCompare(b.name));
      return list;
    };

    const filteredPlayers = filtered().map((p,i)=>({ ...p, rank: i+1 })); // recalcul rank

    return (
      <div className="min-h-screen bg-gray-900 text-gray-100 p-6">
        <header className="max-w-5xl mx-auto mb-8">
          <h1 className="text-3xl font-extrabold mb-3">Nulls Brawl — Top 50</h1>
          <div className="flex gap-3 flex-wrap mb-3">
            <a href="https://discord.gg/prissme" target="_blank" rel="noopener noreferrer" className="px-3 py-2 bg-indigo-600 rounded hover:bg-indigo-500 transition">Discord</a>
            <a href="https://ko-fi.com/prissme" target="_blank" rel="noopener noreferrer" className="px-3 py-2 bg-yellow-500 rounded hover:bg-yellow-400 transition">Coaching 5€</a>
            <input placeholder="Recherche..." value={query} onChange={e=>setQuery(e.target.value)} className="px-2 py-1 rounded bg-gray-800 text-gray-100" />
            <select value={sortBy} onChange={e=>setSortBy(e.target.value)} className="px-2 py-1 rounded bg-gray-800">
              <option value="rank">Rang</option>
              <option value="score">Score</option>
              <option value="name">Pseudo</option>
            </select>
          </div>
          <div className="flex gap-2 flex-wrap">
            {tiers.map(t => (
              <button key={t} onClick={()=>setSelectedTier(t)} className={`px-3 py-1 rounded-full text-sm font-semibold ${selectedTier===t?'bg-indigo-600 text-white':'bg-gray-800 text-gray-300'}`}>{t}</button>
            ))}
          </div>
        </header>

        <main className="max-w-5xl mx-auto">
          <div className="grid gap-3">
            {filteredPlayers.map(player => (
              <div key={player.rank} className={`${tierStyles[player.tier]} p-4 rounded-lg shadow-lg flex items-center justify-between text-gray-900 font-bold`}>
                <div className="flex items-center gap-4">
                  <span className="text-2xl">#{player.rank}</span>
                  <span className="text-xl">{player.name}</span>
                </div>
                <div className="flex items-center gap-4">
                  <span className="text-lg">{player.score} pts</span>
                  <span className="px-3 py-1 bg-white bg-opacity-40 rounded-full text-sm">Tier {player.tier}</span>
                </div>
              </div>
            ))}
          </div>
        </main>
      </div>
    );
  }

  const root = ReactDOM.createRoot(document.getElementById('root'));
  root.render(<DemonList />);
</script>
